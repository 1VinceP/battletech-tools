function update_mech_status_bar_and_tro(a,b,c){b(["BM_REMAINING_TONS","BM_UNALLOCATED_ARMOR"]).then(function(b){a.mech_status_bar="<strong>"+b.BM_REMAINING_TONS+"</strong>: "+c.getRemainingTonnage()+" | <strong>"+b.BM_UNALLOCATED_ARMOR+"</strong>: "+c.getUnallocatedArmor(),a.mech_summary_html=c.makeTROHTML()})}function generateUUID(){var a=(new Date).getTime();window.performance&&"function"==typeof window.performance.now&&(a+=performance.now());var b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:3&c|8).toString(16)});return b}function Mech(a){this.mech_type=mechTypeOptions[0],this.tech=btTechOptions[0],this.era=btEraOptions[0],this.make="",this.model="",this.uuid="",this.tonnage=20,this.useLang="en-US",this.max_armor=0,this.internalStructure={},this.internalStructure.head=0,this.internalStructure.centerTorso=0,this.internalStructure.leftTorso=0,this.internalStructure.rightTorso=0,this.internalStructure.rightArm=0,this.internalStructure.leftArm=0,this.internalStructure.rightLeg=0,this.internalStructure.leftLeg=0,this.additional_heat_sinks=0,this.armorWeight=0,this.total_armor=0,this.unallocated_armor=0,this.armorAllocation={},this.heat_sink_type="single",this.armorAllocation.head=0,this.armorAllocation.centerTorso=0,this.armorAllocation.leftTorso=0,this.armorAllocation.rightTorso=0,this.armorAllocation.centerTorsoRear=0,this.armorAllocation.leftTorsoRear=0,this.armorAllocation.rightTorsoRear=0,this.armorAllocation.rightArm=0,this.armorAllocation.leftArm=0,this.armorAllocation.rightLeg=0,this.armorAllocation.leftLeg=0,this.armorAllocation.head=0,this.equipmentList=Array(),this.weights=Array(),this.critical_items=Array(),this.criticals={},this.criticals.centerTorso=Array(),this.criticals.leftTorso=Array(),this.criticals.rightTorso=Array(),this.criticals.centerTorsoRear=Array(),this.criticals.leftTorsoRear=Array(),this.criticals.rightTorsoRear=Array(),this.criticals.rightArm=Array(),this.criticals.leftArm=Array(),this.criticals.rightLeg=Array(),this.criticals.leftLeg=Array(),this.weights=Array(),this.gyro="Standard",this.engine=0,this.engineType="Standard",this.jumpJetType="Standard",this.walkSpeed=0,this.runSpeed=0,this.jumpSpeed=0,this.max_armor_tonnage=0,this.battleValue="n/a",this.alphaStrikeValue="n/a",this.alphaStrikeForceStats={make:"",model:"",size_class:"",move:"",jump_move:"",pv:"",range_short:"",range_medium:"",range_long:"",range_extreme:"",armor:"",structure:"",size:0,skill:4,ov:0,notes:""}}function update_walking_jumping_dropdowns(a,b,c){b(["BM_STEP2_SELECT_WALK","BM_STEP2_SELECT_JUMP","BM_MP_ABBR"]).then(function(b){for(availble_walking_mp=[],availble_jumping_mp=[],selected_walking_mp=0,selected_jumping_mp=0,max_walking=400/c.tonnage,max_jumping=c.getWalkSpeed(),m_counter=0;m_counter<=max_walking;m_counter++)0==m_counter?(availble_walking_mp.push({id:m_counter,name:"- "+b.BM_STEP2_SELECT_WALK+" -"}),c.getWalkSpeed()==m_counter&&(selected_walking_mp={id:m_counter,name:"- "+b.BM_STEP2_SELECT_WALK+" -"})):(availble_walking_mp.push({id:m_counter,name:m_counter+" "+b.BM_MP_ABBR}),c.getWalkSpeed()==m_counter&&(selected_walking_mp={id:m_counter,name:m_counter+" "+b.BM_MP_ABBR}));for(m_counter=0;m_counter<=max_jumping;m_counter++)0==m_counter?(availble_jumping_mp.push({id:m_counter,name:"- "+b.BM_STEP2_SELECT_JUMP+" -"}),c.getJumpSpeed()==m_counter&&(selected_jumping_mp={id:m_counter,name:"- "+b.BM_STEP2_SELECT_JUMP+" -"})):(availble_jumping_mp.push({id:m_counter,name:m_counter+" "+b.BM_MP_ABBR}),c.getJumpSpeed()==m_counter&&(selected_jumping_mp={id:m_counter,name:m_counter+" "+b.BM_MP_ABBR}));a.mech_jumping={availableOptions:availble_jumping_mp,selectedOption:selected_jumping_mp},a.mech_walking={availableOptions:availble_walking_mp,selectedOption:selected_walking_mp}})}function update_heat_sink_dropdown(a,b,c){b(["BM_STEP3_CRITICAL_REQUIRED","BM_STEP3_CRITICAL_REQUIRED_NONE","BM_STEP3_CRITICAL_REQUIRED_SINGLE"]).then(function(b){current_heat_sinks=c.getHeatSinks()-10,a.heat_sink_list=[],a.heat_sink_list.push({id:0,label:"None"}),0==current_heat_sinks&&(a.selected_heat_sinks={id:0,label:"None"});for(var d=1;d<=Math.floor(c.getRemainingTonnage())+current_heat_sinks;d++)a.heat_sink_list.push({id:d,label:d}),d==current_heat_sinks&&(a.selected_heat_sinks={id:d,label:d});heat_sinks_required=c.getHeatSinkCriticalRequirements(),the_label=b.BM_STEP3_CRITICAL_REQUIRED,the_label_single=b.BM_STEP3_CRITICAL_REQUIRED_SINGLE,the_label_none=b.BM_STEP3_CRITICAL_REQUIRED_NONE,a.hs_crits_required=heat_sinks_required.number*heat_sinks_required.slots_each,hs_crit_count=heat_sinks_required.number*heat_sinks_required.slots_each,1==hs_crit_count?a.label_criticals_required=the_label_single.replace("{hs_crits_required}",hs_crit_count):0==hs_crit_count?a.label_criticals_required=the_label_none.replace("{hs_crits_required}",hs_crit_count):a.label_criticals_required=the_label.replace("{hs_crits_required}",hs_crit_count)})}var available_languages=[];baseApp=angular.module("baseApp",["ngRoute","ngResource","ngSanitize","pascalprecht.translate"],["$routeProvider","$translateProvider",function(a,b,c,d){for(lang_count=0;lang_count<available_languages.length;lang_count++)available_languages[lang_count].active&&b.translations(available_languages[lang_count].short_code,available_languages[lang_count].translations);b.useSanitizeValueStrategy("sanitize"),preferred_language="en-US",localStorage&&localStorage["tmp.preferred_language"]?preferred_language=localStorage["tmp.preferred_language"]:localStorage["tmp.preferred_language"]="en-US",b.preferredLanguage(preferred_language),a.when("/",{templateUrl:"pages/welcome.html",controller:"welcomeController"}).when("/credits",{templateUrl:"pages/credits.html",controller:"creditsController"}).when("/battlemech-creator/",{templateUrl:"pages/battlemech-creator-welcome.html",controller:"battlemechCreatorControllerWelcome"}).when("/battlemech-creator-step1/",{templateUrl:"pages/battlemech-creator-step1.html",controller:"battlemechCreatorControllerStep1"}).when("/battlemech-creator-step2/",{templateUrl:"pages/battlemech-creator-step2.html",controller:"battlemechCreatorControllerStep2"}).when("/battlemech-creator-step3/",{templateUrl:"pages/battlemech-creator-step3.html",controller:"battlemechCreatorControllerStep3"}).when("/battlemech-creator-step4/",{templateUrl:"pages/battlemech-creator-step4.html",controller:"battlemechCreatorControllerStep4"}).when("/battlemech-creator-step5/",{templateUrl:"pages/battlemech-creator-step5.html",controller:"battlemechCreatorControllerStep5"}).when("/battlemech-creator-step6/",{templateUrl:"pages/battlemech-creator-step6.html",controller:"battlemechCreatorControllerStep6"}).when("/battlemech-creator-summary/",{templateUrl:"pages/battlemech-creator-summary.html",controller:"battlemechCreatorControllerSummary"})}]),angular.module("baseApp").controller("select_language",["$translate","$scope","$route",function(a,b,c){b.change_language=function(b){a.use(b),localStorage["tmp.preferred_language"]=b,c.reload()}}]);var btEraOptions=Array({id:1,name:{"en-US":"Early Succession Wars","de-DE":"de - Early Succession Wars"},year_start:2781,year_end:2900},{id:2,name:{"en-US":"Late Succession Wars","de-DE":"de - Late Succession Wars"},year_start:2901,year_end:3049}),mechClanEquipment=Array(),mechEngineOptions=Array({name:"10",rating:10,weight:{ice:1,cell:1,fission:5,comp:1,standard:.5,light:.5,xl:.5}},{name:"15",rating:15,weight:{ice:1,cell:1,fission:5,comp:1,standard:.5,light:.5,xl:.5}},{name:"20",rating:20,weight:{ice:1,cell:1,fission:5,comp:1,standard:.5,light:.5,xl:.5}},{name:"25",rating:25,weight:{ice:1,cell:1,fission:5,comp:1,standard:.5,light:.5,xl:.5}},{name:"30",rating:30,weight:{ice:2,cell:1.5,fission:5,comp:1.5,standard:1,light:1,xl:.5}},{name:"35",rating:35,weight:{ice:2,cell:1.5,fission:5,comp:1.5,standard:1,light:1,xl:.5}},{name:"40",rating:40,weight:{ice:2,cell:1.5,fission:5,comp:1.5,standard:1,light:1,xl:.5}},{name:"45",rating:45,weight:{ice:2,cell:1.5,fission:5,comp:1.5,standard:1,light:1,xl:.5}},{name:"50",rating:50,weight:{ice:3,cell:2,fission:5,comp:2.5,standard:1.5,light:1.5,xl:1}},{name:"55",rating:55,weight:{ice:3,cell:2,fission:5,comp:2.5,standard:1.5,light:1.5,xl:1}},{name:"60",rating:60,weight:{ice:3,cell:2,fission:5,comp:2.5,standard:1.5,light:1.5,xl:1}},{name:"65",rating:65,weight:{ice:4,cell:2.5,fission:5,comp:3,standard:2,light:1.5,xl:1}},{name:"70",rating:70,weight:{ice:4,cell:2.5,fission:5,comp:3,standard:2,light:1.5,xl:1}},{name:"75",rating:75,weight:{ice:4,cell:2.5,fission:5,comp:3,standard:2,light:1.5,xl:1}},{name:"80",rating:80,weight:{ice:5,cell:3,fission:5,comp:4,standard:2.5,light:2,xl:1.5}},{name:"85",rating:85,weight:{ice:5,cell:3,fission:5,comp:4,standard:2.5,light:2,xl:1.5}},{name:"90",rating:90,weight:{ice:6,cell:4,fission:5.5,comp:4.5,standard:3,light:2.5,xl:1.5}},{name:"95",rating:95,weight:{ice:6,cell:4,fission:5.5,comp:4.5,standard:3,light:2.5,xl:1.5}},{name:"100",rating:100,weight:{ice:6,cell:4,fission:5.5,comp:4.5,standard:3.5,light:2.5,xl:1.5}},{name:"105",rating:105,weight:{ice:7,cell:4.5,fission:6.5,comp:5.5,standard:3.5,light:3,xl:2}},{name:"110",rating:110,weight:{ice:7,cell:4.5,fission:6.5,comp:5.5,standard:3.5,light:3,xl:2}},{name:"115",rating:115,weight:{ice:7,cell:4.5,fission:6.5,comp:5.5,standard:3.5,light:3,xl:2}},{name:"120",rating:120,weight:{ice:8,cell:5,fission:7,comp:6,standard:4,light:3,xl:2}},{name:"125",rating:125,weight:{ice:8,cell:5,fission:7,comp:6,standard:4,light:3,xl:2}},{name:"130",rating:130,weight:{ice:9,cell:5.5,fission:8,comp:7,standard:4.5,light:3.5,xl:2.5}},{name:"135",rating:135,weight:{ice:9,cell:5.5,fission:8,comp:7,standard:4.5,light:3.5,xl:2.5}},{name:"140",rating:140,weight:{ice:10,cell:6,fission:9,comp:7.5,standard:5,light:4,xl:2.5}},{name:"145",rating:145,weight:{ice:10,cell:6,fission:9,comp:7.5,standard:5,light:4,xl:2.5}},{name:"150",rating:150,weight:{ice:11,cell:7,fission:10,comp:8.5,standard:5.5,light:4.5,xl:3}},{name:"155",rating:155,weight:{ice:11,cell:7,fission:10,comp:8.5,standard:5.5,light:4.5,xl:3}},{name:"160",rating:160,weight:{ice:12,cell:7.5,fission:10.5,comp:9,standard:6,light:4.5,xl:3}},{name:"165",rating:165,weight:{ice:12,cell:7.5,fission:10.5,comp:9,standard:6,light:4.5,xl:4}},{name:"170",rating:170,weight:{ice:12,cell:7.5,fission:10.5,comp:9,standard:6,light:4.5,xl:4}},{name:"175",rating:175,weight:{ice:14,cell:8.5,fission:12.5,comp:10,standard:7,light:5.5,xl:3.5}},{name:"180",rating:180,weight:{ice:14,cell:8.5,fission:12.5,comp:10.5,standard:7,light:5.5,xl:3.5}},{name:"185",rating:185,weight:{ice:15,cell:9,fission:13.5,comp:11.5,standard:7.6,light:6,xl:4}},{name:"190",rating:190,weight:{ice:15,cell:9,fission:13.5,comp:11.5,standard:7.5,light:6,xl:4}},{name:"195",rating:195,weight:{ice:16,cell:10,fission:14,comp:12,standard:8,light:6,xl:4}},{name:"200",rating:200,weight:{ice:17,cell:10.5,fission:15,comp:13,standard:8.5,light:6.5,xl:4.5}},{name:"205",rating:205,weight:{ice:17,cell:10.5,fission:15,comp:13,standard:8.5,light:6.5,xl:4.5}},{name:"210",rating:210,weight:{ice:18,cell:11,fission:16,comp:13.5,standard:9,light:7,xl:4.5}},{name:"215",rating:215,weight:{ice:18,cell:11,fission:16,comp:13.5,standard:10,light:7.5,xl:5}},{name:"220",rating:220,weight:{ice:20,cell:12,fission:17.5,comp:15,standard:10,light:7.5,xl:5}},{name:"225",rating:225,weight:{ice:20,cell:12,fission:17.5,comp:15,standard:10,light:7.5,xl:5}},{name:"230",rating:230,weight:{ice:21,cell:13,fission:18.5,comp:16,standard:10.5,light:8,xl:5.5}},{name:"235",rating:235,weight:{ice:22,cell:13.5,fission:19.5,comp:16.5,standard:11,light:8.5,xl:5.5}},{name:"240",rating:240,weight:{ice:23,cell:14,fission:20.5,comp:17.5,standard:11.5,light:9,xl:6}},{name:"245",rating:245,weight:{ice:24,cell:14.5,fission:5,comp:1,standard:.5,light:.5,xl:.5}},{name:"250",rating:250,weight:{ice:25,cell:15,fission:22,comp:19,standard:12.5,light:9.6,xl:6.5}},{name:"255",rating:255,weight:{ice:26,cell:16,fission:23,comp:19.5,standard:13,light:10,xl:6.5}},{name:"260",rating:260,weight:{ice:27,cell:16.5,fission:24,comp:20.5,standard:13.5,light:10.5,xl:7}},{name:"265",rating:265,weight:{ice:28,cell:17,fission:24.5,comp:21,standard:14,light:10.5,xl:7}},{name:"270",rating:270,weight:{ice:29,cell:17.5,fission:25.5,comp:22,standard:14.5,light:11,xl:7.5}},{name:"275",rating:275,weight:{ice:31,cell:19,fission:27.5,comp:23.5,standard:15.5,light:12,xl:8}},{name:"280",rating:280,weight:{ice:32,cell:19.5,fission:28,comp:24,standard:16,light:12,xl:8}},{name:"285",rating:285,weight:{ice:33,cell:20,fission:29,comp:25,standard:16.5,light:12.5,xl:8.5}},{name:"290",rating:290,weight:{ice:35,cell:21,fission:31,comp:26.5,standard:17.5,light:13.5,xl:9}},{name:"295",rating:295,weight:{ice:36,cell:22,fission:31.5,comp:27,standard:18,light:13.5,xl:9}},{name:"300",rating:300,weight:{ice:38,cell:23,fission:33.5,comp:28.5,standard:19,light:15.5,xl:9.5}},{name:"305",rating:305,weight:{ice:39,cell:23.5,fission:34.5,comp:29.5,standard:19.5,light:15,xl:10}},{name:"310",rating:310,weight:{ice:41,cell:25,fission:36,comp:31,standard:20.5,light:15.5,xl:10.5}},{name:"315",rating:315,weight:{ice:43,cell:26,fission:38,comp:32.5,standard:21.5,light:16.5,xl:11}},{name:"320",rating:320,weight:{ice:45,cell:27,fission:39.5,comp:34,standard:22.5,light:17,xl:11.5}},{name:"325",rating:325,weight:{ice:47,cell:28.5,fission:41.5,comp:33.5,standard:23.5,light:18,xl:12}},{name:"330",rating:330,weight:{ice:49,cell:29.5,fission:43,comp:37,standard:24.5,light:18.5,xl:12.5}},{name:"335",rating:335,weight:{ice:51,cell:31,fission:45,comp:38.5,standard:25.5,light:18.5,xl:12.5}},{name:"340",rating:340,weight:{ice:54,cell:32.5,fission:47.5,comp:40.5,standard:27,light:20.5,xl:13.5}},{name:"345",rating:345,weight:{ice:57,cell:34.5,fission:50,comp:40.5,standard:29.5,light:21.5,xl:14.5}},{name:"350",rating:350,weight:{ice:59,cell:35.5,fission:52,comp:44.5,standard:29.5,light:22.5,xl:15}},{name:"355",rating:355,weight:{ice:63,cell:38,fission:55.5,comp:47.5,standard:31.5,light:24,xl:16}},{name:"360",rating:360,weight:{ice:66,cell:40,fission:58,comp:49.5,standard:33,light:25,xl:16.5}},{name:"365",rating:365,weight:{ice:69,cell:41.5,fission:60.5,comp:52,standard:34.5,light:26,xl:17.5}},{name:"370",rating:370,weight:{ice:73,cell:44,fission:64,comp:55,standard:36.5,light:27.5,xl:18.5}},{name:"375",rating:375,weight:{ice:77,cell:46.5,fission:67.5,comp:58,standard:38.5,light:29,xl:19.5}},{name:"380",rating:380,weight:{ice:82,cell:49.5,fission:72,comp:61.5,standard:41,light:31,xl:20.5}},{name:"385",rating:385,weight:{ice:87,cell:52.5,fission:76.5,comp:65.5,standard:43.5,light:33,xl:22}},{name:"390",rating:390,weight:{ice:92,cell:55.5,fission:80.5,comp:69,standard:46,light:34.5,xl:23}},{name:"395",rating:395,weight:{ice:98,cell:59,fission:86,comp:73.5,standard:49,light:37,xl:24.5}},{name:"400",rating:400,weight:{ice:105.5,cell:63,fission:92,comp:79,standard:52.5,light:39.5,xl:26.5}}),mechISEquipment=Array({name:{"en-US":"Small Laser","de-DE":"de - Small Laser"},tag:"small-laser",category:{"en-US":"Laser Weapons","de-DE":"de - Laser Weapons"},damage:3,cbills:11250,introduced:2400,extinct:0,battlevalue:9,ammo_battlevalue:0,heat:1,weight:.5,range_min:{min:0,"short":1,medium:2,"long":3},space:{battlemech:1,protomech:"n/a",combat_vehicle:1,support_vehicle:1,aerospace_fighter:1,small_craft:1,drop_ship:1},ammo_per_ton:0,min_ammo_tons:1,tech_rating:"e",page:227,alpha_strike:{heat:1,range_short:.3,range_medium:0,range_long:0,range_extreme:0,tc:1,notes:Array()}},{name:{"en-US":"Medium Laser","de-DE":"de - Medium Laser"},tag:"medium-laser",category:{"en-US":"Laser Weapons","de-DE":"de - Laser Weapons"},damage:5,cbills:4e4,introduced:2400,extinct:0,battlevalue:46,ammo_battlevalue:0,heat:3,weight:1,range_min:{min:0,"short":3,medium:6,"long":9},space:{battlemech:1,protomech:"n/a",combat_vehicle:1,support_vehicle:1,aerospace_fighter:1,small_craft:1,drop_ship:1},ammo_per_ton:0,min_ammo_tons:1,tech_rating:"e",page:227,alpha_strike:{heat:3,range_short:.5,range_medium:.5,range_long:0,range_extreme:0,tc:1,notes:Array()}},{name:{"en-US":"Large Laser","de-DE":"de - Large Laser"},tag:"large-laser",category:{"en-US":"Laser Weapons","de-DE":"de - Laser Weapons"},damage:8,cbills:1e5,introduced:2400,extinct:0,battlevalue:123,ammo_battlevalue:0,heat:8,weight:5,range_min:{min:0,"short":5,medium:10,"long":15},space:{battlemech:2,protomech:"n/a",combat_vehicle:1,support_vehicle:5,aerospace_fighter:1,small_craft:1,drop_ship:1},ammo_per_ton:0,min_ammo_tons:1,tech_rating:"e",page:227,alpha_strike:{heat:8,range_short:.8,range_medium:.8,range_long:0,range_extreme:0,tc:1,notes:Array()}}),mechTypeOptions=Array({id:1,"class":"biped",name:{"en-US":"Biped","de-DE":"de-Biped"}},{id:2,"class":"quad",name:{"en-US":"Quad","de-DE":"de-Biped"}}),btTechOptions=Array({id:1,name:{"en-US":"Inner Sphere","de-DE":"de - Inner Sphere"}},{id:2,name:{"en-US":"Clan","de-DE":"de - Clan"}}),class_dice=function(){};class_dice.prototype={init:function(){this.always_exploding_dice=!1,this.roll_set_count_rolls=[],this.roll_set_count=0,this.label_no_effect="No Effect",this.label_shaken="Shaken",this.label_shaken_and_a_wound="Shaken and a wound",this.label_shaken_and_x_wounds="Shaken and {raises} wounds",this.label_critical_failure="Critical Failure",this.label_failure="Failure",this.label_success="Success",this.label_success_with_a_raise="Success with a raise",this.label_success_with_x_raises="Success with {raises} raises",this.label_die_roll_number="die roll #",this.label_wild_die_roll_number="wild die roll #",this.label_roll_set_number="Roll Set #",this.label_total_roll="Total Roll",this.success_target_number=4,this.success_base_toughness=5,this.success_armor=1,this.success_weapons_ap=0},roll_die:function(a,b,c){for(a||(a=6),total_roll=0,keep_rolling=1,display_roll="";keep_rolling>0;)roll=Math.floor(Math.random()*a)+1,b>0&&roll==a?keep_rolling=1:keep_rolling=0,display_roll+=roll+", ",total_roll+=roll;if(this.roll_set_count_rolls[this.roll_set_count].base_rolls.push(display_roll),this.roll_set_count_rolls[this.roll_set_count].base_roll_sides.push(a),wild_display_roll="",totalwild_dieRoll=0,keep_rolling=1,c>0)for(a=6;keep_rolling>0;)roll=Math.floor(Math.random()*a)+1,b>0&&roll==a?keep_rolling=1:keep_rolling=0,totalwild_dieRoll+=roll,wild_display_roll+=roll+", ";return this.roll_set_count_rolls[this.roll_set_count].wild_die_rolls.push(wild_display_roll),1==totalwild_dieRoll&&1==total_roll?this.roll_set_count_rolls[this.roll_set_count].critical_failure=1:this.roll_set_count_rolls[this.roll_set_count].critical_failure=0,totalwild_dieRoll>total_roll?totalwild_dieRoll:total_roll},roll_dice:function(a,b){var c=0;number_of_sides=6,a.indexOf("*")>0?wild_die=1:wild_die=0,number_of_sides<2&&(number_of_sides=2),a=a.replace("*",""),explodingDice=0,a.indexOf("d")>-1?(rollNumber=a.substring(0,a.indexOf("d"))/1,number_of_sides=a.substring(a.indexOf("d")+1)/1,this.always_exploding_dice&&(explodingDice=1)):a.indexOf("e")>-1?(explodingDice=1,rollNumber=a.substring(0,a.indexOf("e"))/1,number_of_sides=a.substring(a.indexOf("e")+1)/1):rollNumber=a,rollNumber||(rollNumber=1),number_of_sides||(number_of_sides=6);for(var d=rollNumber+"d"+number_of_sides+": ";rollNumber-- >0;)dieRoll=this.roll_die(number_of_sides,explodingDice,wild_die),c+=dieRoll,d+=dieRoll+",",this.roll_set_count_rolls[this.roll_set_count].total_rolled_dice++;return d=d.substring(0,d.length-1),d+="",c},_parse_bit:function(a){return value=0,a.indexOf("d")>-1?value=this.roll_dice(a,0):a.indexOf("e")>-1?value=this.roll_dice(a,0):value=a/1,value},_parse_roll_set:function(a){if(set_total=0,a=a.replace(/ /g,""),a=a.toLowerCase(),a=a.replace(/\+/g," + "),a=a.replace(/x/g," x "),a=a.replace(/\//g," / "),a=a.replace(/\-/g," - "),a=a.replace(/\)/g," ) "),a=a.replace(/\(/g," ( "),a=a.replace(/\,/g," , "),this.roll_set_count_rolls[this.roll_set_count]={},this.roll_set_count_rolls[this.roll_set_count].base_rolls=[],this.roll_set_count_rolls[this.roll_set_count].wild_die_rolls=[],this.roll_set_count_rolls[this.roll_set_count].base_roll_sides=[],this.roll_set_count_rolls[this.roll_set_count].total_rolled_dice=0,this.roll_set_count_rolls[this.roll_set_count].critical_failure=0,a.indexOf(" ")>0)for(items=a.split(" "),current_function="+",count=0;count<items.length;count++)"+"!=items[count]&&"x"!=items[count]&&"-"!=items[count]&&"/"!=items[count]?"+"==current_function?set_total+=this._parse_bit(items[count])/1:"-"==current_function?set_total-=this._parse_bit(items[count])/1:"x"==current_function?0==set_total?set_total=items[count]/1:set_total=set_total*this._parse_bit(items[count])/1:"/"==current_function&&(set_total=set_total/this._parse_bit(items[count])/1):current_function=items[count];else set_total+=this._parse_bit(a);this.roll_set_count_rolls[this.roll_set_count].total_roll=set_total,this.roll_set_count++},parse_roll:function(a){if(total=0,this.roll_set_count=0,this.roll_set_count_rolls=[],a.indexOf(",")>0)for(parse_roll_items=a.split(","),parse_roll_itemcount=0;parse_roll_itemcount<parse_roll_items.length;parse_roll_itemcount++)total=this._parse_roll_set(parse_roll_items[parse_roll_itemcount]);else total+=this._parse_roll_set(a);return total},display_results:function(a,b){for(html="",results_set_count=0;results_set_count<this.roll_set_count;results_set_count++)for(this.roll_set_count>1&&(results_set_count>0&&(html+="<hr />"),html+="<h4>"+this.label_roll_set_number+(results_set_count+1)+"</h4>"),html+="<h5>"+this.label_total_roll+": "+this.roll_set_count_rolls[results_set_count].total_roll+"</h5>",a&&(html+=this.trait_success_margin(this.roll_set_count_rolls[results_set_count].total_roll,null,results_set_count)+"<br />"),b&&(html+=this.damage_success_margin(this.roll_set_count_rolls[results_set_count].total_roll)+"<br />"),current_roll=0;current_roll<this.roll_set_count_rolls[results_set_count].total_rolled_dice;current_roll++)"undefined"!=typeof this.roll_set_count_rolls[results_set_count].base_rolls[current_roll]&&(html+="<br />"+this.label_die_roll_number+(current_roll+1)+" (d"+this.roll_set_count_rolls[results_set_count].base_roll_sides[current_roll]+"): ",this.roll_set_count_rolls[results_set_count].base_rolls[current_roll]&&(this.roll_set_count_rolls[results_set_count].base_rolls[current_roll].length>2?html+=this.roll_set_count_rolls[results_set_count].base_rolls[current_roll].substring(0,this.roll_set_count_rolls[results_set_count].base_rolls[current_roll].length-2):html+=this.roll_set_count_rolls[results_set_count].base_rolls[current_roll])),"undefined"!=typeof this.roll_set_count_rolls[results_set_count].wild_die_rolls[current_roll]&&(this.roll_set_count_rolls[results_set_count].wild_die_rolls[current_roll].length>0&&(html+="<br />"+this.label_wild_die_roll_number+(current_roll+1)+" (d6): "),this.roll_set_count_rolls[results_set_count].wild_die_rolls[current_roll]&&(this.roll_set_count_rolls[results_set_count].wild_die_rolls[current_roll].length>2?html+=this.roll_set_count_rolls[results_set_count].wild_die_rolls[current_roll].substring(0,this.roll_set_count_rolls[results_set_count].wild_die_rolls[current_roll].length-2):html+=this.roll_set_count_rolls[results_set_count].wild_die_rolls[current_roll]));return html},trait_success_margin:function(a,b,c){return b||(b=this.success_target_number),value=a/1-b/1,html="","undefined"!=typeof c&&this.roll_set_count_rolls[c].critical_failure>0?html+='<span  class="color-red bolded uppercase">'+this.label_critical_failure+"</span>":value<0?html+='<span  class="color-red">'+this.label_failure+"</span>":(raises=Math.floor(value/4),0==raises?html+=this.label_success:1==raises?html+='<span  class="color-green bolded">'+this.label_success_with_a_raise+"</span>":html+='<span  class="color-green bolded uppercase">'+this.label_success_with_x_raises.replace("{raises}",raises)+"</span>"),html},set_result_margins:function(a,b,c,d){this.success_target_number=a,this.success_base_toughness=b,this.success_armor=c,this.success_weapons_ap=d},set_label:function(a,b){return"no_effect"==a?(this.label_no_effect=b,b):"total_roll"==a?(this.label_total_roll=b,b):"shaken"==a?(this.label_shaken=b,b):"shaken_and_a_wound"==a?(this.label_shaken_and_a_wound=b,b):"shaken_and_x_wounds"==a?(this.label_shaken_and_x_wounds=b,b):"critical_failure"==a?(this.label_critical_failure=b,b):"roll_set_number"==a?(this.label_roll_set_number=b,b):"failure"==a?(this.label_failure=b,b):"success"==a?(this.label_success=b,b):"success_with_a_raise"==a?(this.label_success_with_a_raise=b,b):"success_with_x_raises"==a?(this.label_success_with_x_raises=b,b):"die_roll_number"==a?(this.label_die_roll_number=b,b):"wild_die_roll_number"==a?(this.label_wild_die_roll_number=b,b):null},set_always_exploding_dice:function(a){return this.always_exploding_dice=a,this.always_exploding_dice},damage_success_margin:function(a,b,c,d){return b||(b=this.success_base_toughness),c||(c=this.success_armor),d||(d=this.success_weapons_ap),c=c/1-d/1,0>c&&(c=0),target_number=b/1+c/1,value=a/1-target_number/1,html="",value<0?html+="<span>"+this.label_no_effect+"</span>":(raises=Math.floor(value/4),0==raises?html+='<span class="color-orange">'+this.label_shaken+"</span>":1==raises?html+='<span class="color-red">'+this.label_shaken_and_a_wound+"</span>":html+='<span class="color-red bolded uppercase">'+this.label_shaken_and_x_wounds.replace("{raises}",raises)+"</span>"),html}},Mech.prototype._calcAlphaStrike=function(){if(this.alphaStrikeForceStats.make=this.make,this.alphaStrikeForceStats.model=this.model,this.alphaStrikeForceStats.move=2*this.getWalkSpeed(),this.alphaStrikeForceStats.jump_move=2*this.getJumpSpeed(),this.alphaStrikeForceStats.pv=0,this.alphaStrikeForceStats.range_short=0,this.alphaStrikeForceStats.range_medium=0,this.alphaStrikeForceStats.range_long=0,this.alphaStrikeForceStats.range_extreme=0,this.alphaStrikeForceStats.armor=0,this.alphaStrikeForceStats.structure=0,this.alphaStrikeForceStats.skill=4,this.alphaStrikeForceStats.ov=0,this.alphaStrikeForceStats.notes="",this.alphaStrikeForceStats.size_class="",this.alphaStrikeForceStats.size_class_name="",this.alphaStrikeForceStats.special_unit_abilities=Array(),this.tonnage>100?(this.alphaStrikeForceStats.size_class=4,this.alphaStrikeForceStats.size_class_name="Superheavy",this.alphaStrikeForceStats.special_unit_abilities.push("LG")):this.tonnage>=80?(this.alphaStrikeForceStats.size_class=4,this.alphaStrikeForceStats.size_class_name="Assault"):this.tonnage>=60?(this.alphaStrikeForceStats.size_class=3,this.alphaStrikeForceStats.size_class_name="Heavy"):this.tonnage>=40?(this.alphaStrikeForceStats.size_class=2,this.alphaStrikeForceStats.size_class_name="Medium"):(this.alphaStrikeForceStats.size_class=1,this.alphaStrikeForceStats.size_class_name="Light"),this.alphaStrikeForceStats.armor=(this.getTotalArmor()/30).toFixed(0),"Inner Sphere"==this.getTech().name)switch(this.engineType){case"Compact":case"Compact Fusion":100==this.tonnage?this.alphaStrikeForceStats.structure=10:this.tonnage>=95?this.alphaStrikeForceStats.structure=10:this.tonnage>=90?this.alphaStrikeForceStats.structure=10:this.tonnage>=85?this.alphaStrikeForceStats.structure=9:this.tonnage>=80?this.alphaStrikeForceStats.structure=8:this.tonnage>=75?this.alphaStrikeForceStats.structure=8:this.tonnage>=70?this.alphaStrikeForceStats.structure=7:this.tonnage>=65?this.alphaStrikeForceStats.structure=7:this.tonnage>=60?this.alphaStrikeForceStats.structure=7:this.tonnage>=55?this.alphaStrikeForceStats.structure=6:this.tonnage>=50?this.alphaStrikeForceStats.structure=5:this.tonnage>=45?this.alphaStrikeForceStats.structure=5:this.tonnage>=40?this.alphaStrikeForceStats.structure=4:this.tonnage>=35?this.alphaStrikeForceStats.structure=4:this.tonnage>=30?this.alphaStrikeForceStats.structure=3:this.tonnage>=25?this.alphaStrikeForceStats.structure=3:this.tonnage>=20?this.alphaStrikeForceStats.structure=2:this.tonnage>=15?this.alphaStrikeForceStats.structure=2:this.tonnage>=10&&(this.alphaStrikeForceStats.structure=1);break;case"Light":case"Light Fusion":100==this.tonnage?this.alphaStrikeForceStats.structure=5:this.tonnage>=95?this.alphaStrikeForceStats.structure=5:this.tonnage>=90?this.alphaStrikeForceStats.structure=5:this.tonnage>=85?this.alphaStrikeForceStats.structure=5:this.tonnage>=80?this.alphaStrikeForceStats.structure=4:this.tonnage>=75?this.alphaStrikeForceStats.structure=4:this.tonnage>=70?this.alphaStrikeForceStats.structure=4:this.tonnage>=65?this.alphaStrikeForceStats.structure=4:this.tonnage>=60?this.alphaStrikeForceStats.structure=3:this.tonnage>=55?this.alphaStrikeForceStats.structure=3:this.tonnage>=50?this.alphaStrikeForceStats.structure=3:this.tonnage>=45?this.alphaStrikeForceStats.structure=2:this.tonnage>=40?this.alphaStrikeForceStats.structure=2:this.tonnage>=35?this.alphaStrikeForceStats.structure=2:this.tonnage>=30?this.alphaStrikeForceStats.structure=2:this.tonnage>=25?this.alphaStrikeForceStats.structure=1:this.tonnage>=20?this.alphaStrikeForceStats.structure=1:this.tonnage>=15?this.alphaStrikeForceStats.structure=1:this.tonnage>=10&&(this.alphaStrikeForceStats.structure=1);break;default:100==this.tonnage?this.alphaStrikeForceStats.structure=8:this.tonnage>=95?this.alphaStrikeForceStats.structure=8:this.tonnage>=90?this.alphaStrikeForceStats.structure=7:this.tonnage>=85?this.alphaStrikeForceStats.structure=7:this.tonnage>=80?this.alphaStrikeForceStats.structure=6:this.tonnage>=75?this.alphaStrikeForceStats.structure=6:this.tonnage>=70?this.alphaStrikeForceStats.structure=6:this.tonnage>=65?this.alphaStrikeForceStats.structure=5:this.tonnage>=60?this.alphaStrikeForceStats.structure=5:this.tonnage>=55?this.alphaStrikeForceStats.structure=5:this.tonnage>=50?this.alphaStrikeForceStats.structure=4:this.tonnage>=45?this.alphaStrikeForceStats.structure=4:this.tonnage>=40?this.alphaStrikeForceStats.structure=3:this.tonnage>=35?this.alphaStrikeForceStats.structure=3:this.tonnage>=30?this.alphaStrikeForceStats.structure=3:this.tonnage>=25?this.alphaStrikeForceStats.structure=2:this.tonnage>=20?this.alphaStrikeForceStats.structure=2:this.tonnage>=15?this.alphaStrikeForceStats.structure=1:this.tonnage>=10&&(this.alphaStrikeForceStats.structure=1)}else switch(this.engineType){case"XL":case"XL Fusion":100==this.tonnage?this.alphaStrikeForceStats.structure=5:this.tonnage>=95?this.alphaStrikeForceStats.structure=5:this.tonnage>=90?this.alphaStrikeForceStats.structure=5:this.tonnage>=85?this.alphaStrikeForceStats.structure=5:this.tonnage>=80?this.alphaStrikeForceStats.structure=4:this.tonnage>=75?this.alphaStrikeForceStats.structure=4:this.tonnage>=70?this.alphaStrikeForceStats.structure=4:this.tonnage>=65?this.alphaStrikeForceStats.structure=4:this.tonnage>=60?this.alphaStrikeForceStats.structure=3:this.tonnage>=55?this.alphaStrikeForceStats.structure=3:this.tonnage>=50?this.alphaStrikeForceStats.structure=3:this.tonnage>=45?this.alphaStrikeForceStats.structure=2:this.tonnage>=40?this.alphaStrikeForceStats.structure=2:this.tonnage>=35?this.alphaStrikeForceStats.structure=2:this.tonnage>=30?this.alphaStrikeForceStats.structure=2:this.tonnage>=25?this.alphaStrikeForceStats.structure=1:this.tonnage>=20?this.alphaStrikeForceStats.structure=1:this.tonnage>=15?this.alphaStrikeForceStats.structure=1:this.tonnage>=10&&(this.alphaStrikeForceStats.structure=1);break;default:100==this.tonnage?this.alphaStrikeForceStats.structure=8:this.tonnage>=95?this.alphaStrikeForceStats.structure=8:this.tonnage>=90?this.alphaStrikeForceStats.structure=7:this.tonnage>=85?this.alphaStrikeForceStats.structure=7:this.tonnage>=80?this.alphaStrikeForceStats.structure=6:this.tonnage>=75?this.alphaStrikeForceStats.structure=6:this.tonnage>=70?this.alphaStrikeForceStats.structure=6:this.tonnage>=65?this.alphaStrikeForceStats.structure=5:this.tonnage>=60?this.alphaStrikeForceStats.structure=5:this.tonnage>=55?this.alphaStrikeForceStats.structure=5:this.tonnage>=50?this.alphaStrikeForceStats.structure=4:this.tonnage>=45?this.alphaStrikeForceStats.structure=4:this.tonnage>=40?this.alphaStrikeForceStats.structure=3:this.tonnage>=35?this.alphaStrikeForceStats.structure=3:this.tonnage>=30?this.alphaStrikeForceStats.structure=3:this.tonnage>=25?this.alphaStrikeForceStats.structure=2:this.tonnage>=20?this.alphaStrikeForceStats.structure=2:this.tonnage>=15?this.alphaStrikeForceStats.structure=1:this.tonnage>=10&&(this.alphaStrikeForceStats.structure=1);
}for(total_weapon_heat=0,weapon_counter=0;weapon_counter<this.equipmentList.length;weapon_counter++)this.equipmentList[weapon_counter].alpha_strike&&(total_weapon_heat+=this.alphaStrikeForceStats.heat,this.alphaStrikeForceStats.range_short+=this.equipmentList[weapon_counter].alpha_strike.range_short,this.alphaStrikeForceStats.range_medium+=this.equipmentList[weapon_counter].alpha_strike.range_medium,this.alphaStrikeForceStats.range_long+=this.equipmentList[weapon_counter].alpha_strike.range_long,this.alphaStrikeForceStats.range_extreme+=this.equipmentList[weapon_counter].alpha_strike.range_extreme);this.getJumpSpeed()>0?this.getJumpSpeed()/2<3?total_weapon_heat+=3:total_weapon_heat+=this.getJumpSpeed()/2:total_weapon_heat+=2,this.alphaStrikeForceStats.range_short=this.alphaStrikeForceStats.range_short.toFixed(0)/1,this.alphaStrikeForceStats.range_medium=this.alphaStrikeForceStats.range_medium.toFixed(0)/1,this.alphaStrikeForceStats.range_long=this.alphaStrikeForceStats.range_long.toFixed(0)/1,this.alphaStrikeForceStats.range_extreme=this.alphaStrikeForceStats.range_extreme.toFixed(0)/1,this.alphaStrikeValue=this.alphaStrikeForceStats.pv},Mech.prototype._calcBattleValue=function(){this.battleValue=0},Mech.prototype.getBattleValue=function(){return this.battleValue},Mech.prototype.getAlphaStrikeValue=function(){return this.alphaStrikeValue},Mech.prototype.getEngineWeight=function(){return this.engine&&this.engine.weight?this.engine.weight.standard:0},Mech.prototype.getEngineRating=function(){return this.engine&&this.engine.rating?this.engine.rating:0},Mech.prototype.getHeatSinks=function(){return 10+this.additional_heat_sinks},Mech.prototype.getHeatSinksWeight=function(){return 0+this.additional_heat_sinks},Mech.prototype.getGyroWeight=function(){switch(this.gyro){case"Compact":return 1.5*Math.ceil(this.engine.rating/100);case"Heavy Duty":return 2*Math.ceil(this.engine.rating/100);case"Extra-Light (XL)":return.5*Math.ceil(this.engine.rating/100);default:return Math.ceil(this.engine.rating/100)}return Math.ceil(this.engine.rating/100)},Mech.prototype.getCockpitWeight=function(){return 3},Mech.prototype.getInteralStructureWeight=function(){return this.tonnage/10},Mech.prototype.getJumpJetWeight=function(){return"Standard"==this.jumpJetType?this.tonnage<=55?.5*this.jumpSpeed:this.tonnage<=85?1*this.jumpSpeed:2*this.jumpSpeed:this.tonnage<=55?1*this.jumpSpeed:this.tonnage<=85?2*this.jumpSpeed:4*this.jumpSpeed},Mech.prototype.getTranslation=function(a){for(lang_count=0;lang_count<available_languages.length;lang_count++)if(available_languages[lang_count].short_code==this.useLang)return available_languages[lang_count].translations[a]?available_languages[lang_count].translations[a]:a},Mech.prototype.getASCalcHTML=function(){return'<div class="callout alert">TODO</div>'},Mech.prototype.getBVCalcHTML=function(){return'<div class="callout alert">TODO</div>'},Mech.prototype.makeTROHTML=function(){for(html='<table class="mech-tro">',html+='<tr><td colspan="4">'+this.getTranslation("TRO_TYPE")+": <strong>"+this.getName()+"</strong></td></tr>",html+='<tr><td colspan="4">'+this.getTranslation("TRO_TECHNOLOGY_BASE")+": "+this.getTech().name[this.useLang]+"</td></tr>",html+='<tr><td colspan="4">'+this.getTranslation("TRO_ERA")+": "+this.getEra().name[this.useLang]+"</td></tr>",html+='<tr><td colspan="4">'+this.getTranslation("TRO_TONNAGE")+": "+this.getTonnage()+"</td></tr>",html+='<tr><td colspan="4">'+this.getTranslation("TRO_BATTLE_VALUE")+": "+this.getBattleValue()+"</td></tr>",html+='<tr><td colspan="4">'+this.getTranslation("TRO_ALPHA_STRIKE_VALUE")+": "+this.getAlphaStrikeValue()+"</td></tr>",html+='<tr><td colspan="4">&nbsp;</td></tr>',html+='<tr><th class="text-left" colspan="3">'+this.getTranslation("TRO_EQUIPMENT")+'</th><th class="text-center" colspan="1">'+this.getTranslation("TRO_MASS")+"</th></tr>",html+='<tr><td colspan="3">'+this.getTranslation("TRO_INTERNAL_STRUCTURE")+'</td><td class="text-center" colspan="1">'+this.getInteralStructureWeight()+"</td></tr>",html+='<tr><td colspan="1">'+this.getTranslation("TRO_ENGINE")+'</td><td class="text-center" colspan="2">'+this.getEngineRating()+'</td><td class="text-center" colspan="1">'+this.getEngineWeight()+"</td></tr>",html+='<tr><td colspan="1" class="text-right">'+this.getTranslation("TRO_WALKING")+'</td><td class="text-center" colspan="2">'+this.getWalkSpeed()+'</td><td colspan="1">&nbsp;</td></tr>',html+='<tr><td colspan="1" class="text-right">'+this.getTranslation("TRO_RUNNING")+'</td><td class="text-center" colspan="2">'+this.getRunSpeed()+'</td><td colspan="1">&nbsp;</td></tr>',html+='<tr><td colspan="1" class="text-right">'+this.getTranslation("TRO_JUMPING")+'</td><td class="text-center" colspan="2">'+this.getJumpSpeed()+'</td><td colspan="1">&nbsp;</td></tr>',html+='<tr><td colspan="1">'+this.getTranslation("TRO_HEAT_SINKS")+'</td><td class="text-center" colspan="2">'+this.getHeatSinks()+'</td><td class="text-center" colspan="1">'+this.getHeatSinksWeight()+"</td></tr>",html+='<tr><td colspan="3">'+this.getTranslation("TRO_GYRO")+'</td><td class="text-center" colspan="1">'+this.getGyroWeight()+"</td></tr>",html+='<tr><td colspan="3">'+this.getTranslation("TRO_COCKPIT")+'</td><td class="text-center" colspan="1">'+this.getCockpitWeight()+"</td></tr>",this.getJumpJetWeight()>0&&(html+='<tr><td colspan="3">'+this.getTranslation("TRO_JUMP_JETS")+'</td><td class="text-center" colspan="1">'+this.getJumpJetWeight()+"</td></tr>"),html+='<tr><td colspan="1">'+this.getTranslation("TRO_ARMOR_FACTOR")+'</td><td class="text-center" colspan="2">'+this.getTotalArmor()+'</td><td class="text-center" colspan="1">'+this.getArmorWeight()+"</td></tr>",html+='<tr><td colspan="1"></td><td class="text-center" colspan="1"><em style="font-size: 12px;">'+this.getTranslation("TRO_ARMOR_IS")+'</em></td><td class="text-center" colspan="1"><em style="font-size: 12px;">'+this.getTranslation("TRO_ARMOR_VALUE")+"</em></td><td>&nbsp;</td></tr>",html+='<tr><td  class="text-right"colspan="1">'+this.getTranslation("TRO_ARMOR_HD")+'</td><td class="text-center" colspan="1">'+this.internalStructure.head+'</td><td class="text-center" colspan="1">'+this.armorAllocation.head+"</td><td>&nbsp;</td></tr>",html+='<tr><td  class="text-right"colspan="1">'+this.getTranslation("TRO_ARMOR_CT")+'</td><td class="text-center" colspan="1">'+this.internalStructure.centerTorso+'</td><td class="text-center" colspan="1">'+this.armorAllocation.centerTorso+"</td><td>&nbsp;</td></tr>",html+='<tr><td  class="text-right"colspan="1">'+this.getTranslation("TRO_ARMOR_CTR")+'</td><td class="text-center" colspan="1">&nbsp;</td><td class="text-center" colspan="1">'+this.armorAllocation.centerTorsoRear+"</td><td>&nbsp;</td></tr>",this.armorAllocation.rightTorso==this.armorAllocation.leftTorso&&this.armorAllocation.rightTorsoRear==this.armorAllocation.leftTorsoRear?(html+='<tr><td  class="text-right"colspan="1">'+this.getTranslation("TRO_ARMOR_RLT")+'</td><td class="text-center" colspan="1">'+this.internalStructure.rightTorso+'</td><td class="text-center" colspan="1">'+this.armorAllocation.rightTorso+"</td><td>&nbsp;</td></tr>",html+='<tr><td  class="text-right"colspan="1">'+this.getTranslation("TRO_ARMOR_RLTR")+'</td><td class="text-center" colspan="1">&nbsp;</td><td class="text-center" colspan="1">'+this.armorAllocation.rightTorsoRear+"</td><td>&nbsp;</td></tr>"):(html+='<tr><td  class="text-right"colspan="1">'+this.getTranslation("TRO_ARMOR_RT")+'</td><td class="text-center" colspan="1">'+this.internalStructure.rightTorso+'</td><td class="text-center" colspan="1">'+this.armorAllocation.rightTorso+"</td><td>&nbsp;</td></tr>",html+='<tr><td  class="text-right"colspan="1">'+this.getTranslation("TRO_ARMOR_RTR")+'</td><td class="text-center" colspan="1">&nbsp;</td><td class="text-center" colspan="1">'+this.armorAllocation.rightTorsoRear+"</td><td>&nbsp;</td></tr>",html+='<tr><td  class="text-right"colspan="1">'+this.getTranslation("TRO_ARMOR_LT")+'</td><td class="text-center" colspan="1">'+this.internalStructure.leftTorso+'</td><td class="text-center" colspan="1">'+this.armorAllocation.leftTorso+"</td><td>&nbsp;</td></tr>",html+='<tr><td  class="text-right"colspan="1">'+this.getTranslation("TRO_ARMOR_LTR")+'</td><td class="text-center" colspan="1">&nbsp;</td><td class="text-center" colspan="1">'+this.armorAllocation.leftTorsoRear+"</td><td>&nbsp;</td></tr>"),this.armorAllocation.rightArm==this.armorAllocation.leftArm?html+='<tr><td  class="text-right"colspan="1">'+this.getTranslation("TRO_ARMOR_RLA")+'</td><td class="text-center" colspan="1">'+this.internalStructure.rightArm+'</td><td class="text-center" colspan="1">'+this.armorAllocation.rightArm+"</td><td>&nbsp;</td></tr>":(html+='<tr><td  class="text-right"colspan="1">'+this.getTranslation("TRO_ARMOR_RA")+'</td><td class="text-center" colspan="1">'+this.internalStructure.rightArm+'</td><td class="text-center" colspan="1">'+this.armorAllocation.rightArm+"</td><td>&nbsp;</td></tr>",html+='<tr><td  class="text-right"colspan="1">'+this.getTranslation("TRO_ARMOR_LA")+'</td><td class="text-center" colspan="1">'+this.internalStructure.leftArm+'</td><td class="text-center" colspan="1">'+this.armorAllocation.leftArm+"</td><td>&nbsp;</td></tr>"),this.armorAllocation.rightLeg==this.armorAllocation.leftLeg?html+='<tr><td  class="text-right"colspan="1">'+this.getTranslation("TRO_ARMOR_RLL")+'</td><td class="text-center" colspan="1">'+this.internalStructure.rightLeg+'</td><td class="text-center" colspan="1">'+this.armorAllocation.rightLeg+"</td><td>&nbsp;</td></tr>":(html+='<tr><td  class="text-right"colspan="1">'+this.getTranslation("TRO_ARMOR_RL")+'</td><td class="text-center" colspan="1">'+this.internalStructure.rightLeg+'</td><td class="text-center" colspan="1">'+this.armorAllocation.rightLeg+"</td><td>&nbsp;</td></tr>",html+='<tr><td  class="text-right"colspan="1">'+this.getTranslation("TRO_ARMOR_LL")+'</td><td class="text-center" colspan="1">'+this.internalStructure.leftLeg+'</td><td class="text-center" colspan="1">'+this.armorAllocation.leftLeg+"</td><td>&nbsp;</td></tr>"),html+="</table>",html+="<br />",html+='<table class="mech-tro">',html+='<tr><th class="text-left">'+this.getTranslation("TRO_WEAPONS_AND_AMMO")+'</th><th class="text-center">'+this.getTranslation("TRO_LOCATION")+'</th><th class="text-center"><strong>'+this.getTranslation("TRO_CRITICAL")+'</th><th class="text-center">'+this.getTranslation("TRO_TONNAGE")+"</th></tr>",eq_count=0;eq_count<this.equipmentList.length;eq_count++)html+='<tr><td class="text-left">'+this.equipmentList[eq_count].name[this.useLang]+'</td><td class="text-center">'+this.equipmentList[eq_count].location[this.useLang]+'</strong></td><td class="text-center">'+this.equipmentList[eq_count].space.battlemech+'</td><td class="text-center">'+this.equipmentList[eq_count].weight+"</td></tr>";return html+="</table>",html},Mech.prototype.clearMech=function(){this.setMechType(1),this.setTonnage(20),this._calc()},Mech.prototype._calc=function(){if(this.weights=Array(),this.weights.push({name:"Internal Structure",weight:this.getInteralStructureWeight()}),this.weights.push({name:"Cockpit",weight:this.getCockpitWeight()}),this.runSpeed=Math.ceil(1.5*this.walkSpeed),0==this.era&&(this.era=btEraOptions[1]),0==this.tech&&(this.tech=btTechOptions[0]),0==this.mech_type&&(this.mech_type=mechTypeOptions[0]),this.engine)switch(this.weights.push({name:"Standard Engine - "+this.engine.rating,weight:this.engine.weight.standard}),this.gyro){case"Compact":this.weights.push({name:"Compact Gyro",weight:this.getGyroWeight()});break;case"Heavy Duty":this.weights.push({name:"Heavy Duty Gyro",weight:2*Math.ceil(this.engine.rating/100)});break;case"Extra-Light (XL)":this.weights.push({name:"Extra-Light (XL) Gyro",weight:.5*Math.ceil(this.engine.rating/100)});break;default:this.weights.push({name:"Standard Gyro",weight:Math.ceil(this.engine.rating/100)})}for(this.jumpSpeed>0&&("Standard"==this.jumpJetType?this.weights.push({name:"Jump Jets",weight:this.getJumpJetWeight()}):this.weights.push({name:"Improved Jets",weight:this.getJumpJetWeight()})),this.total_armor=16*this.armorWeight,this.total_armor>this.max_armor&&(this.total_armor=this.max_armor),this.weights.push({name:"Armor",weight:this.armorWeight}),this.unallocated_armor=this.total_armor,this.unallocated_armor-=this.armorAllocation.head,this.unallocated_armor-=this.armorAllocation.centerTorso,this.unallocated_armor-=this.armorAllocation.leftTorso,this.unallocated_armor-=this.armorAllocation.rightTorso,this.unallocated_armor-=this.armorAllocation.centerTorsoRear,this.unallocated_armor-=this.armorAllocation.leftTorsoRear,this.unallocated_armor-=this.armorAllocation.rightTorsoRear,this.unallocated_armor-=this.armorAllocation.rightArm,this.unallocated_armor-=this.armorAllocation.leftArm,this.unallocated_armor-=this.armorAllocation.rightLeg,this.unallocated_armor-=this.armorAllocation.leftLeg,this.additional_heat_sinks>0&&this.weights.push({name:"Additional Heat Sinks",weight:this.additional_heat_sinks}),eq_count=0;eq_count<this.equipmentList.length;eq_count++)this.weights.push({name:this.equipmentList[eq_count].name+" ("+this.equipmentList[eq_count].location+")",weight:this.equipmentList[eq_count].weight});for(this.current_tonnage=0,weight_counter=0;weight_counter<this.weights.length;weight_counter++)this.current_tonnage+=this.weights[weight_counter].weight;this.remaining_tonnage=this.tonnage-this.current_tonnage,this.heat_sink_criticals={},this.heat_sink_criticals.number=0,this.heat_sink_criticals.slots_type="single slot",this.heat_sink_criticals.slots_each=1,"double"==this.heat_sink_type?"Clan"==this.tech.name?(this.heat_sink_criticals.slots_type="double slot",this.heat_sink_criticals.slots_each=2):(this.heat_sink_criticals.slots_type="triple slot",this.heat_sink_criticals.slots_each=3):(this.heat_sink_criticals.slots_type="single",this.heat_sink_criticals.slots_each=1),this.getEngine().rating?this.heat_sink_criticals.number=this.additional_heat_sinks+10-Math.floor(this.getEngine().rating/25):this.heat_sink_criticals.number=0,this._calcAlphaStrike(),this._calcBattleValue()},Mech.prototype.getHeatSinksType=function(){return this.heat_sink_type},Mech.prototype.setHeatSinksType=function(a){return this.heat_sink_type=a,this.heat_sink_type},Mech.prototype.getCurrentTonnage=function(){return this.current_tonnage},Mech.prototype.getHeatSinkCriticalRequirements=function(){return this.heat_sink_criticals},Mech.prototype.getArmorAllocations=function(){return this.armorAllocation},Mech.prototype.getRemainingTonnage=function(){return this.remaining_tonnage},Mech.prototype.getWalkSpeed=function(){return this.walkSpeed},Mech.prototype.setWalkSpeed=function(a){return this.walkSpeed=a/1,this.setEngine(this.tonnage*this.walkSpeed),this.jumpSpeed>this.walkSpeed&&this.setJumpSpeed(this.walkSpeed),this.walkSpeed},Mech.prototype.getRunSpeed=function(){return this.runSpeed},Mech.prototype.getJumpSpeed=function(){return this.jumpSpeed},Mech.prototype.setJumpSpeed=function(a){return this.jumpSpeed=a/1,this._calc(),this.walkSpeed},Mech.prototype.getArmorWeight=function(){return this.armorWeight},Mech.prototype.getTotalArmor=function(){return this.total_armor},Mech.prototype.getUnallocatedArmor=function(){return this.unallocated_armor},Mech.prototype.setArmorWeight=function(a){return this.armorWeight=a/1,this._calc(),this.armorWeight},Mech.prototype.getEngine=function(){return this.engine},Mech.prototype.setEngine=function(a){for(a/=1,engine_count=0;engine_count<mechEngineOptions.length;engine_count++)if(mechEngineOptions[engine_count].rating==a)return this.engine=mechEngineOptions[engine_count],this._calc(),this.engine;return this._calc(),0},Mech.prototype.setGyro=function(a){return this.gyro=a,this._calc(),this.gyro},Mech.prototype.getGyro=function(){return this.gyro},Mech.prototype.getEra=function(){return this.era},Mech.prototype.setEra=function(a){for(lcounter=0;lcounter<btEraOptions.length;lcounter++)if(a==btEraOptions[lcounter].id)return this.era=btEraOptions[lcounter],this._calc(),this.era;return null},Mech.prototype.getTech=function(){return this.tech},Mech.prototype.setTech=function(a){for(lcounter=0;lcounter<btTechOptions.length;lcounter++)if(a==btTechOptions[lcounter].id)return this.tech=btTechOptions[lcounter],this._calc(),this.tech;return null},Mech.prototype.getMechType=function(){return this.mech_type},Mech.prototype.setMechType=function(a){for(lcounter=0;lcounter<mechTypeOptions.length;lcounter++)if(a==mechTypeOptions[lcounter].id)return this.mech_type=mechTypeOptions[lcounter],this.setTonnage(this.tonnage),this._calc(),this.mech_type;return null},Mech.prototype.setEngineType=function(a){return this.engineType=a,this._calc(),this.engine},Mech.prototype.getEngineType=function(){return this.engineType},Mech.prototype.getName=function(){return this.make},Mech.prototype.setName=function(a){return this.make=a,this.make},Mech.prototype.getTonnage=function(){return this.tonnage},Mech.prototype.setTonnage=function(a){switch(this.tonnage=parseInt(a),this.tonnage){case 20:this.internalStructure.head=3,this.internalStructure.centerTorso=6,this.internalStructure.leftTorso=5,this.internalStructure.rightTorso=5,this.internalStructure.rightArm=3,this.internalStructure.leftArm=3,this.internalStructure.rightLeg=4,this.internalStructure.leftLeg=4,"biped"==this.mech_type["class"].toLowerCase()?this.max_armor=69:this.max_armor=73;break;case 25:this.internalStructure.head=3,this.internalStructure.centerTorso=8,this.internalStructure.leftTorso=6,this.internalStructure.rightTorso=6,this.internalStructure.rightArm=4,this.internalStructure.leftArm=4,this.internalStructure.rightLeg=6,this.internalStructure.leftLeg=6,"biped"==this.mech_type["class"].toLowerCase()?this.max_armor=89:this.max_armor=97;break;case 30:this.internalStructure.head=3,this.internalStructure.centerTorso=10,this.internalStructure.leftTorso=7,this.internalStructure.rightTorso=7,this.internalStructure.rightArm=5,this.internalStructure.leftArm=5,this.internalStructure.rightLeg=7,this.internalStructure.leftLeg=7,"biped"==this.mech_type["class"].toLowerCase()?this.max_armor=105:this.max_armor=113;break;case 35:this.internalStructure.head=3,this.internalStructure.centerTorso=11,this.internalStructure.leftTorso=8,this.internalStructure.rightTorso=8,this.internalStructure.rightArm=6,this.internalStructure.leftArm=6,this.internalStructure.rightLeg=8,this.internalStructure.leftLeg=8,"biped"==this.mech_type["class"].toLowerCase()?this.max_armor=119:this.max_armor=127;break;case 40:this.internalStructure.head=3,this.internalStructure.centerTorso=12,this.internalStructure.leftTorso=10,this.internalStructure.rightTorso=10,this.internalStructure.rightArm=6,this.internalStructure.leftArm=6,this.internalStructure.rightLeg=10,this.internalStructure.leftLeg=10,"biped"==this.mech_type["class"].toLowerCase()?this.max_armor=137:this.max_armor=153;break;case 45:this.internalStructure.head=3,this.internalStructure.centerTorso=14,this.internalStructure.leftTorso=11,this.internalStructure.rightTorso=11,this.internalStructure.rightArm=7,this.internalStructure.leftArm=7,this.internalStructure.rightLeg=11,this.internalStructure.leftLeg=11,"biped"==this.mech_type["class"].toLowerCase()?this.max_armor=153:this.max_armor=169;break;case 50:this.internalStructure.head=3,this.internalStructure.centerTorso=16,this.internalStructure.leftTorso=12,this.internalStructure.rightTorso=12,this.internalStructure.rightArm=8,this.internalStructure.leftArm=8,this.internalStructure.rightLeg=12,this.internalStructure.leftLeg=12,"biped"==this.mech_type["class"].toLowerCase()?this.max_armor=169:this.max_armor=185;break;case 55:this.internalStructure.head=3,this.internalStructure.centerTorso=18,this.internalStructure.leftTorso=13,this.internalStructure.rightTorso=13,this.internalStructure.rightArm=9,this.internalStructure.leftArm=9,this.internalStructure.rightLeg=13,this.internalStructure.leftLeg=13,"biped"==this.mech_type["class"].toLowerCase()?this.max_armor=285:this.max_armor=201;break;case 60:this.internalStructure.head=3,this.internalStructure.centerTorso=20,this.internalStructure.leftTorso=14,this.internalStructure.rightTorso=14,this.internalStructure.rightArm=10,this.internalStructure.leftArm=10,this.internalStructure.rightLeg=14,this.internalStructure.leftLeg=14,"biped"==this.mech_type["class"].toLowerCase()?this.max_armor=201:this.max_armor=217;break;case 65:this.internalStructure.head=3,this.internalStructure.centerTorso=21,this.internalStructure.leftTorso=15,this.internalStructure.rightTorso=15,this.internalStructure.rightArm=10,this.internalStructure.leftArm=10,this.internalStructure.rightLeg=15,this.internalStructure.leftLeg=15,"biped"==this.mech_type["class"].toLowerCase()?this.max_armor=211:this.max_armor=231;break;case 70:this.internalStructure.head=3,this.internalStructure.centerTorso=22,this.internalStructure.leftTorso=15,this.internalStructure.rightTorso=15,this.internalStructure.rightArm=11,this.internalStructure.leftArm=11,this.internalStructure.rightLeg=15,this.internalStructure.leftLeg=15,"biped"==this.mech_type["class"].toLowerCase()?this.max_armor=213:this.max_armor=233;break;case 75:this.internalStructure.head=3,this.internalStructure.centerTorso=23,this.internalStructure.leftTorso=16,this.internalStructure.rightTorso=16,this.internalStructure.rightArm=12,this.internalStructure.leftArm=12,this.internalStructure.rightLeg=16,this.internalStructure.leftLeg=16,"biped"==this.mech_type["class"].toLowerCase()?this.max_armor=231:this.max_armor=247;break;case 80:this.internalStructure.head=3,this.internalStructure.centerTorso=25,this.internalStructure.leftTorso=17,this.internalStructure.rightTorso=17,this.internalStructure.rightArm=13,this.internalStructure.leftArm=13,this.internalStructure.rightLeg=17,this.internalStructure.leftLeg=17,"biped"==this.mech_type["class"].toLowerCase()?this.max_armor=247:this.max_armor=263;break;case 85:this.internalStructure.head=3,this.internalStructure.centerTorso=27,this.internalStructure.leftTorso=18,this.internalStructure.rightTorso=18,this.internalStructure.rightArm=14,this.internalStructure.leftArm=14,this.internalStructure.rightLeg=18,this.internalStructure.leftLeg=18,"biped"==this.mech_type["class"].toLowerCase()?this.max_armor=263:this.max_armor=279;break;case 90:this.internalStructure.head=3,this.internalStructure.centerTorso=29,this.internalStructure.leftTorso=19,this.internalStructure.rightTorso=19,this.internalStructure.rightArm=15,this.internalStructure.leftArm=15,this.internalStructure.rightLeg=19,this.internalStructure.leftLeg=19,"biped"==this.mech_type["class"].toLowerCase()?this.max_armor=279:this.max_armor=295;break;case 95:this.internalStructure.head=3,this.internalStructure.centerTorso=30,this.internalStructure.leftTorso=20,this.internalStructure.rightTorso=20,this.internalStructure.rightArm=16,this.internalStructure.leftArm=16,this.internalStructure.rightLeg=20,this.internalStructure.leftLeg=20,"biped"==this.mech_type["class"].toLowerCase()?this.max_armor=293:this.max_armor=309;break;case 100:this.internalStructure.head=3,this.internalStructure.centerTorso=31,this.internalStructure.leftTorso=21,this.internalStructure.rightTorso=21,this.internalStructure.rightArm=17,this.internalStructure.leftArm=17,this.internalStructure.rightLeg=21,this.internalStructure.leftLeg=21,"biped"==this.mech_type["class"].toLowerCase()?this.max_armor=307:this.max_armor=323}return"quad"==this.mech_type["class"].toLowerCase()&&(this.internalStructure.rightArm=this.internalStructure.rightLeg,this.internalStructure.leftArm=this.internalStructure.leftLeg),this.max_armor_tonnage=this.max_armor/16,this.setWalkSpeed(this.walkSpeed),this._calc(),this.tonnage},Mech.prototype.getMaxArmorTonnage=function(){return this.max_armor_tonnage},Mech.prototype.getMaxArmor=function(){return this.max_armor},Mech.prototype.getType=function(){return this.mech_type},Mech.prototype.setType=function(a){return this.mech_type=a,this.setTonnage(this.tonnage),this._calc(),this.mech_type},Mech.prototype.calcBattleValue=function(){},Mech.prototype.calcAlphaStrikeValue=function(){},Mech.prototype.exportJSON=function(){this._calc();var a={};for(a.name=this.getName(),a.tonnage=this.getTonnage(),a.walkSpeed=this.walkSpeed,a.jumpSpeed=this.jumpSpeed,a.engineType=this.getEngineType(),a.mech_type=this.mech_type.id,a.era=this.era.id,a.tech=this.tech.id,a.additional_heat_sinks=this.additional_heat_sinks,a.armor_weight=this.armorWeight,this.uuid||(this.uuid=generateUUID()),a.uuid=this.uuid,a.armor_allocation=this.armorAllocation,a.equipment=Array(),eq_count=0;eq_count<this.equipmentList.length;eq_count++)a.equipment.push({tag:this.equipmentList[eq_count].tag,loc:this.equipmentList[eq_count].location});return JSON.stringify(a)},Mech.prototype.getInteralStructure=function(){return this.internalStructure},Mech.prototype.importJSON=function(a){if(import_object=JSON.parse(a),"object"==typeof import_object){if(this.setName(import_object.name),import_object.mech_type&&this.setMechType(import_object.mech_type),this.setTonnage(import_object.tonnage),import_object.walkSpeed&&this.setWalkSpeed(import_object.walkSpeed),import_object.jumpSpeed&&this.setJumpSpeed(import_object.jumpSpeed),import_object.engineType&&this.setEngineType(import_object.engineType),import_object.additional_heat_sinks&&this.setAdditionalHeatSinks(import_object.additional_heat_sinks),import_object.era&&this.setEra(import_object.era),import_object.tech&&this.setTech(import_object.tech),import_object.armor_weight&&this.setArmorWeight(import_object.armor_weight),import_object.armor_allocation&&(this.armorAllocation=import_object.armor_allocation),import_object.uuid&&(this.uuid=import_object.uuid),import_object.equipment)for(eq_count=0;eq_count<import_object.equipment.length;eq_count++)import_item=import_object.equipment[eq_count],"Inner Sphere"==this.getTech().name&&this.addEquipmentFromTag(import_item.tag,"is",import_item.loc),"Clan"==this.getTech().name&&this.addEquipmentFromTag(import_item.tag,"clan",import_item.loc);return this._calc(),!0}return!1},Mech.prototype.getWeightBreakdown=function(){return this.weights},Mech.prototype.setCenterTorsoArmor=function(a){return this.armorAllocation.centerTorso=a/1,this._calc(),this.armorAllocation.centerTorso},Mech.prototype.setCenterTorsoRearArmor=function(a){return this.armorAllocation.centerTorsoRear=a/1,this._calc(),this.armorAllocation.centerTorsoRear},Mech.prototype.setHeadArmor=function(a){return this.armorAllocation.head=a/1,this._calc(),this.armorAllocation.head},Mech.prototype.setLeftArmArmor=function(a){return this.armorAllocation.leftArm=a/1,this._calc(),this.armorAllocation.leftArm},Mech.prototype.setLeftLegArmor=function(a){return this.armorAllocation.leftLeg=a/1,this._calc(),this.armorAllocation.leftLeg},Mech.prototype.setLeftTorsoArmor=function(a){return this.armorAllocation.leftTorso=a/1,this._calc(),this.armorAllocation.leftTorso},Mech.prototype.setLeftTorsoRearArmor=function(a){return this.armorAllocation.leftTorsoRear=a/1,this._calc(),this.armorAllocation.leftTorsoRear},Mech.prototype.setRightArmArmor=function(a){return this.armorAllocation.rightArm=a/1,this._calc(),this.armorAllocation.rightArm},Mech.prototype.setRightLegArmor=function(a){return this.armorAllocation.rightLeg=a/1,this._calc(),this.armorAllocation.rightLeg},Mech.prototype.setRightTorsoArmor=function(a){return this.armorAllocation.rightTorso=a/1,this._calc(),this.armorAllocation.rightTorso},Mech.prototype.setRightTorsoRearArmor=function(a){return this.armorAllocation.rightTorsoRear=a/1,this._calc(),this.armorAllocation.rightTorsoRear},Mech.prototype.getAdditionalHeatSinks=function(){return this.additional_heat_sinks},Mech.prototype.addEquipment=function(a,b,c){return equipment_list=Array(),"is"==b&&(equipment_list=mechISEquipment),"clan"==b&&(equipment_list=mechClanEquipment),equipment_list[a]?(equipment_item=jQuery.extend({},equipment_list[a]),equipment_item.location=c,this.equipmentList.push(equipment_item),equipment_item):null},Mech.prototype.addEquipmentFromTag=function(a,b,c){for(equipment_list=Array(),"is"==b&&(equipment_list=mechISEquipment),"clan"==b&&(equipment_list=mechClanEquipment),add_counter=0;add_counter<equipment_list.length;add_counter++)if(a==equipment_list[add_counter].tag)return equipment_item=jQuery.extend({},equipment_list[add_counter]),equipment_item.location=c,this.equipmentList.push(equipment_item),equipment_item;return null},Mech.prototype.removeEquipment=function(a){return this.equipmentList[a]?(this.equipmentList.splice(a,1),1):null},Mech.prototype.setEquipmentLocation=function(a,b){return this.equipmentList[a]?(this.equipmentList[a].location=b,this.equipmentList[a]):null},Mech.prototype.setAdditionalHeatSinks=function(a){return this.additional_heat_sinks=a/1,this._calc(),this.additional_heat_sinks},angular.module("baseApp").controller("battlemechCreatorControllerStep1",["$rootScope","$translate","$scope",function(a,b,c){b(["APP_TITLE","BM_STEP1_TITLE","BM_STEP1_DESC","WELCOME_BUTTON_MECH_CREATOR"]).then(function(b){a.title_tag=b.BM_STEP1_TITLE+" | "+b.APP_TITLE,b.BM_STEP1_DESC?c.h3_title=b.BM_STEP1_TITLE+": "+b.BM_STEP1_DESC:c.h3_title=b.BM_STEP1_TITLE,a.subtitle_tag="&raquo; "+b.WELCOME_BUTTON_MECH_CREATOR}),current_mech=new Mech,localStorage["tmp.current_mech"]?current_mech.importJSON(localStorage["tmp.current_mech"]):current_mech.uuid=generateUUID(),current_mech.useLang=localStorage["tmp.preferred_language"],update_mech_status_bar_and_tro(c,b,current_mech),c.mech_name=current_mech.getName(),translated_btTechOptions=[],translated_mechTypeOptions=[],translated_btEraOptions=[];for(var d=0;d<btTechOptions.length;d++){var e=Object.create(btTechOptions[d]);e.name[localStorage["tmp.preferred_language"]]?(e.name=e.name[localStorage["tmp.preferred_language"]],translated_btTechOptions.push(e)):(e.name="( "+localStorage["tmp.preferred_language"]+" - "+e.name["en-US"]+")",translated_btTechOptions.push(e))}for(var d=0;d<mechTypeOptions.length;d++){var e=Object.create(mechTypeOptions[d]);e.name[localStorage["tmp.preferred_language"]]?(e.name=e.name[localStorage["tmp.preferred_language"]],translated_mechTypeOptions.push(e)):(e.name="( "+localStorage["tmp.preferred_language"]+" - "+e.name["en-US"]+")",translated_mechTypeOptions.push(e))}for(var d=0;d<btEraOptions.length;d++){var e=Object.create(btEraOptions[d]);e.name[localStorage["tmp.preferred_language"]]?(e.name=e.name[localStorage["tmp.preferred_language"]],translated_btEraOptions.push(e)):(e.name="( "+localStorage["tmp.preferred_language"]+" - "+e.name["en-US"]+")",translated_btEraOptions.push(e))}c.mech_tech={availableOptions:translated_btTechOptions,selectedOption:current_mech.getTech()},c.mech_type={availableOptions:translated_mechTypeOptions,selectedOption:current_mech.getType()},c.mech_era={availableOptions:translated_btEraOptions,selectedOption:current_mech.getEra()};for(var f=[],g=20;100>=g;g+=5)f.push(g);c.mech_tonnage_options=f,c.mech_tonnage={availableOptions:f,selectedOption:current_mech.getTonnage()},c.update_mech_name=function(){current_mech.setName(c.mech_name),localStorage["tmp.current_mech"]=current_mech.exportJSON(),update_mech_status_bar_and_tro(c,b,current_mech)},c.update_mech_tech=function(){current_mech.setTech(c.mech_tech.selectedOption.id),localStorage["tmp.current_mech"]=current_mech.exportJSON(),update_mech_status_bar_and_tro(c,b,current_mech)},c.update_mech_type=function(){current_mech.setMechType(c.mech_type.selectedOption.id),localStorage["tmp.current_mech"]=current_mech.exportJSON(),update_mech_status_bar_and_tro(c,b,current_mech)},c.update_mech_era=function(){current_mech.setEra(c.mech_era.selectedOption.id),localStorage["tmp.current_mech"]=current_mech.exportJSON(),update_mech_status_bar_and_tro(c,b,current_mech)},c.update_mech_tonnage=function(){current_mech.setTonnage(c.mech_tonnage.selectedOption),localStorage["tmp.current_mech"]=current_mech.exportJSON(),update_mech_status_bar_and_tro(c,b,current_mech)}}]),angular.module("baseApp").controller("battlemechCreatorControllerStep2",["$rootScope","$translate","$scope",function(a,b,c){
b(["APP_TITLE","BM_STEP2_TITLE","BM_STEP2_DESC","WELCOME_BUTTON_MECH_CREATOR"]).then(function(b){a.title_tag=b.BM_STEP2_TITLE+" | "+b.APP_TITLE,b.BM_STEP2_DESC?c.h3_title=b.BM_STEP2_TITLE+": "+b.BM_STEP2_DESC:c.h3_title=b.BM_STEP2_TITLE,a.subtitle_tag="&raquo; "+b.WELCOME_BUTTON_MECH_CREATOR}),current_mech=new Mech,localStorage["tmp.current_mech"]?current_mech.importJSON(localStorage["tmp.current_mech"]):current_mech.uuid=generateUUID(),current_mech.useLang=localStorage["tmp.preferred_language"],update_walking_jumping_dropdowns(c,b,current_mech),update_mech_status_bar_and_tro(c,b,current_mech),c.update_mech_walking=function(){current_mech.setWalkSpeed(c.mech_walking.selectedOption.id),localStorage["tmp.current_mech"]=current_mech.exportJSON(),update_walking_jumping_dropdowns(c,b,current_mech),update_mech_status_bar_and_tro(c,b,current_mech)},c.update_mech_jumping=function(){current_mech.setJumpSpeed(c.mech_jumping.selectedOption.id),localStorage["tmp.current_mech"]=current_mech.exportJSON(),update_walking_jumping_dropdowns(c,b,current_mech),update_mech_status_bar_and_tro(c,b,current_mech)}}]),angular.module("baseApp").controller("battlemechCreatorControllerStep3",["$rootScope","$translate","$scope",function(a,b,c){b(["APP_TITLE","BM_STEP3_TITLE","BM_STEP3_DESC","WELCOME_BUTTON_MECH_CREATOR"]).then(function(b){a.title_tag=b.BM_STEP3_TITLE+" | "+b.APP_TITLE,b.BM_STEP3_DESC?c.h3_title=b.BM_STEP3_TITLE+": "+b.BM_STEP3_DESC:c.h3_title=b.BM_STEP3_TITLE,a.subtitle_tag="&raquo; "+b.WELCOME_BUTTON_MECH_CREATOR}),current_mech=new Mech,localStorage["tmp.current_mech"]?current_mech.importJSON(localStorage["tmp.current_mech"]):current_mech.uuid=generateUUID(),current_mech.useLang=localStorage["tmp.preferred_language"];var d="";b(["BM_STEP3_BM_INC_10_HS","BM_STEP3_BM_INC_10_DOUBLE_HS","BM_STEP3_CRITICAL_REQUIRED"]).then(function(a){c.label_included_heatsinks=a.BM_STEP3_BM_INC_10_HS,d=a.BM_STEP3_CRITICAL_REQUIRED}),update_heat_sink_dropdown(c,b,current_mech),update_mech_status_bar_and_tro(c,b,current_mech),c.update_selected_heat_sinks=function(){current_mech.setAdditionalHeatSinks(c.selected_heat_sinks.id),update_heat_sink_dropdown(c,b,current_mech),update_mech_status_bar_and_tro(c,b,current_mech),localStorage["tmp.current_mech"]=current_mech.exportJSON()}}]),angular.module("baseApp").controller("battlemechCreatorControllerStep4",["$rootScope","$translate","$scope",function(a,b,c){b(["APP_TITLE","BM_STEP4_TITLE","BM_STEP4_DESC","WELCOME_BUTTON_MECH_CREATOR"]).then(function(b){a.title_tag=b.BM_STEP4_TITLE+" | "+b.APP_TITLE,b.BM_STEP4_DESC?c.h3_title=b.BM_STEP4_TITLE+": "+b.BM_STEP4_DESC:c.h3_title=b.BM_STEP4_TITLE,a.subtitle_tag="&raquo; "+b.WELCOME_BUTTON_MECH_CREATOR}),current_mech=new Mech,localStorage["tmp.current_mech"]?current_mech.importJSON(localStorage["tmp.current_mech"]):current_mech.uuid=generateUUID(),current_mech.useLang=localStorage["tmp.preferred_language"],update_mech_status_bar_and_tro(c,b,current_mech)}]),angular.module("baseApp").controller("battlemechCreatorControllerStep5",["$rootScope","$translate","$scope",function(a,b,c){b(["APP_TITLE","BM_STEP5_TITLE","BM_STEP5_DESC","WELCOME_BUTTON_MECH_CREATOR"]).then(function(b){a.title_tag=b.BM_STEP5_TITLE+" | "+b.APP_TITLE,b.BM_STEP5_DESC?c.h3_title=b.BM_STEP5_TITLE+": "+b.BM_STEP5_DESC:c.h3_title=b.BM_STEP5_TITLE,a.subtitle_tag="&raquo; "+b.WELCOME_BUTTON_MECH_CREATOR}),current_mech=new Mech,localStorage["tmp.current_mech"]?current_mech.importJSON(localStorage["tmp.current_mech"]):current_mech.uuid=generateUUID(),current_mech.useLang=localStorage["tmp.preferred_language"],update_mech_status_bar_and_tro(c,b,current_mech)}]),angular.module("baseApp").controller("battlemechCreatorControllerStep6",["$rootScope","$translate","$scope",function(a,b,c){b(["APP_TITLE","BM_STEP6_TITLE","BM_STEP6_DESC","WELCOME_BUTTON_MECH_CREATOR"]).then(function(b){a.title_tag=b.BM_STEP6_TITLE+" | "+b.APP_TITLE,b.BM_STEP6_DESC?c.h3_title=b.BM_STEP6_TITLE+": "+b.BM_STEP6_DESC:c.h3_title=b.BM_STEP6_TITLE,a.subtitle_tag="&raquo; "+b.WELCOME_BUTTON_MECH_CREATOR}),current_mech=new Mech,localStorage["tmp.current_mech"]?current_mech.importJSON(localStorage["tmp.current_mech"]):current_mech.uuid=generateUUID(),current_mech.useLang=localStorage["tmp.preferred_language"],update_mech_status_bar_and_tro(c,b,current_mech)}]),angular.module("baseApp").controller("battlemechCreatorControllerSummary",["$rootScope","$translate","$scope",function(a,b,c){b(["APP_TITLE","BM_SUMMARY_TITLE","BM_SUMMARY_DESC","WELCOME_BUTTON_MECH_CREATOR"]).then(function(b){a.title_tag=b.BM_SUMMARY_TITLE+" | "+b.APP_TITLE,b.BM_SUMMARY_DESC?c.h3_title=b.BM_SUMMARY_TITLE+": "+b.BM_SUMMARY_DESC:c.h3_title=b.BM_SUMMARY_TITLE,a.subtitle_tag="&raquo; "+b.WELCOME_BUTTON_MECH_CREATOR}),current_mech=new Mech,localStorage["tmp.current_mech"]?current_mech.importJSON(localStorage["tmp.current_mech"]):current_mech.uuid=generateUUID(),current_mech.useLang=localStorage["tmp.preferred_language"],c.mech_tro=current_mech.makeTROHTML(),c.mech_bv_calc=current_mech.getBVCalcHTML(),c.mech_as_calc=current_mech.getASCalcHTML()}]),angular.module("baseApp").controller("battlemechCreatorControllerWelcome",["$rootScope","$translate","$scope",function(a,b,c){b(["APP_TITLE","BM_WELCOME_TITLE","BM_WELCOME_DESC","WELCOME_BUTTON_MECH_CREATOR","BM_WELCOME_TEXT"]).then(function(b){a.title_tag=b.BM_WELCOME_TITLE+" | "+b.APP_TITLE,b.BM_WELCOME_DESC?c.h3_title=b.BM_WELCOME_TITLE+": "+b.BM_WELCOME_DESC:c.h3_title=b.BM_WELCOME_TITLE,a.subtitle_tag="&raquo; "+b.WELCOME_BUTTON_MECH_CREATOR,a.welcome_text=b.BM_WELCOME_TEXT})}]),angular.module("baseApp").controller("battlemechCreatorControllerSidebar",["$rootScope","$translate","$scope","$route",function(a,b,c,d){c.button_welcome_current=!1,c.button_step1_current=!1,c.button_step2_current=!1,c.button_step3_current=!1,c.button_step4_current=!1,c.button_step5_current=!1,c.button_step6_current=!1,c.button_summary_current=!1,"/battlemech-creator/"==d.current.originalPath?c.button_welcome_current=!0:"/battlemech-creator-step1/"==d.current.originalPath?c.button_step1_current=!0:"/battlemech-creator-step2/"==d.current.originalPath?c.button_step2_current=!0:"/battlemech-creator-step3/"==d.current.originalPath?c.button_step3_current=!0:"/battlemech-creator-step4/"==d.current.originalPath?c.button_step4_current=!0:"/battlemech-creator-step5/"==d.current.originalPath?c.button_step5_current=!0:"/battlemech-creator-step6/"==d.current.originalPath?c.button_step6_current=!0:"/battlemech-creator-summary/"==d.current.originalPath&&(c.button_summary_current=!0)}]),angular.module("baseApp").controller("creditsController",["$rootScope","$translate","$scope",function(a,b,c){b(["APP_TITLE","INDEX_WELCOME"]).then(function(b){a.title_tag=b.INDEX_WELCOME+" | "+b.APP_TITLE,a.subtitle_tag="&raquo; "+b.INDEX_CREDITS})}]),angular.module("baseApp").controller("welcomeController",["$rootScope","$translate","$scope",function(a,b,c){b(["APP_TITLE","INDEX_WELCOME"]).then(function(b){a.title_tag=b.INDEX_WELCOME+" | "+b.APP_TITLE,a.subtitle_tag="&raquo; "+b.INDEX_WELCOME})}]),available_languages.push({english_name:"German",native_name:"Deutsch",icon_file:"DE.png",short_code:"de-DE",active:!0,translations:{APP_TITLE:"Jeff's BattleTech Werkzeug",INDEX_WELCOME:"Willkommen",INDEX_H3_CORE:"Jeff's BattleTech Werkzeug",INDEX_BUTTON_MECH_CREATOR:"BattleMech Hersteller",BM_WELCOME_TITLE:"Willkommen",BM_WELCOME_DESC:"",BM_STEP1_TITLE:"Schritt 1",BM_STEP1_DESC:"Gestalten sie das chassis",BM_STEP2_TITLE:"Schritt 2",BM_STEP2_DESC:"Installieren motor und steuerungssysteme",BM_STEP3_TITLE:"Schritt 3",BM_STEP3_DESC:"Fügen sie zusätzliche wärmesenken",BM_STEP4_TITLE:"Schritt 4",BM_STEP4_DESC:"In Rüstung",BM_STEP5_TITLE:"Schritt 5",BM_STEP5_DESC:"In waffen, munition und andere ausrüstung",BM_STEP6_TITLE:"Schritt 6",BM_STEP6_DESC:"Füllen sie das schaublatt",BM_SUMMARY_TITLE:"Der Auszug",BM_SUMMARY_DESC:"",BUTTON_LANG_EN:"English",BUTTON_LANG_DE:"German",BUTTON_LANG_BR:"Brazilian"}}),available_languages.push({english_name:"English",native_name:"English",icon_file:"US.png",short_code:"en-US",active:!0,translations:{APP_TITLE:"Jeff's BattleTech Tools",INDEX_WELCOME:"Welcome",INDEX_H3_CORE:"Jeff's BattleTech Tools",WELCOME_BUTTON_MECH_CREATOR:"BattleMech Creator",WELCOME_H3_CORE:"Jeff's BattleTech Tools",WELCOME_H3_CREATORS_CORE:"BattleTech Creators",WELCOME_H3_FORCE_BUILDERS_CORE:"BattleTech Force Builders",BM_MP_ABBR:"MP",BM_NEXT_STEP:"Next Step",BM_SUMMARY:"Summary",BM_WELCOME_TITLE:"Welcome",BM_WELCOME_DESC:"",BM_WELCOME_TEXT:"<p>Welcome to a BattleTech 'mech builder.</p><p>This tool attempts to closely follow the steps in the BattleTech tech manual and the steps in that book should be referenced during 'mech creation</p>",BM_REMAINING_TONS:"Remaining Tons",BM_UNALLOCATED_ARMOR:"Unallocated Armor",BM_STEP1_TITLE:"Step 1",BM_STEP1_DESC:"Design the Chassis",BM_STEP1_MECH_NAME:"Mech Model Name",BM_STEP1_MECH_TYPE:"Mech Type",BM_STEP1_MECH_ERA:"Mech Era",BM_STEP1_MECH_TONNAGE:"Mech Tonnage",BM_STEP1_MECH_TECH:"Mech Tech",BM_STEP2_TITLE:"Step 2",BM_STEP2_DESC:"Install engine and control systems",BM_STEP2_WALKING_MP:"Walking Movement Points",BM_STEP2_JUMPING_MP:"Jumping Movement Points",BM_STEP2_SELECT_JUMP:"Select Jumping MP",BM_STEP2_SELECT_WALK:"Select Walking MP",BM_STEP3_TITLE:"Step 3",BM_STEP3_DESC:"Add additional heat sinks",BM_STEP3_BM_INC_10_HS:"Your BattleMech includes 10 heat sinks.",BM_STEP3_BM_INC_10_DOUBLE_HS:"Your BattleMech includes 10 double heat sinks.",BM_STEP3_ADD_LABEL:"Additional heat sinks",BM_STEP3_CRITICAL_REQUIRED:"{hs_crits_required} critical slots are required for your engine class and selected heat sinks",BM_STEP3_CRITICAL_REQUIRED_NONE:"No additional critical slots are required for your engine class and selected heat sinks",BM_STEP3_CRITICAL_REQUIRED_SINGLE:"One critical slot is required for your engine class and selected heat sinks",BM_STEP4_TITLE:"Step 4",BM_STEP4_DESC:"Add armor",BM_STEP5_TITLE:"Step 5",BM_STEP5_DESC:"Add weapons, ammunition and other equipment",BM_STEP6_TITLE:"Step 6",BM_STEP6_DESC:"Complete the record sheet",BM_SUMMARY_TITLE:"Summary",BM_SUMMARY_DESC:"",BM_SUMMARY_TRO:"Technical Read Out",BM_SUMMARY_BV_CALC:"Battle Value Calculations",BM_SUMMARY_AS_CALC:"Alpha Strike Calculations",TRO_TYPE:"Type",TRO_TECHNOLOGY_BASE:"Technology Base",TRO_ERA:"Era",TRO_TONNAGE:"Tonnage",TRO_BATTLE_VALUE:"Battle Value",TRO_ALPHA_STRIKE_VALUE:"Alpha Strike Value",TRO_EQUIPMENT:"Equipment",TRO_MASS:"Mass",TRO_INTERNAL_STRUCTURE:"Internal Structure",TRO_ENGINE:"Engine",TRO_WALKING:"Walking",TRO_RUNNING:"Running",TRO_JUMPING:"Jumping",TRO_HEAT_SINKS:"Heat Sinks",TRO_GYRO:"Gyro",TRO_COCKPIT:"Cockpit",TRO_JUMP_JETS:"Jump Jets",TRO_ARMOR_FACTOR:"Armor Factor",TRO_ARMOR_IS:"Internal Structure",TRO_ARMOR_VALUE:"Armor Value",TRO_ARMOR_HD:"Head",TRO_ARMOR_CT:"Center Torso",TRO_ARMOR_CTR:"Center Torso (Rear)",TRO_ARMOR_RLT:"R/L Torso",TRO_ARMOR_RLTR:"R/L Torso (Rear)",TRO_ARMOR_RT:"Right Torso",TRO_ARMOR_RTR:"Right Torso (Rear)",TRO_ARMOR_LT:"Left Torso",TRO_ARMOR_LTR:"Left Torso (Rear)",TRO_ARMOR_RLA:"R/L Arm",TRO_ARMOR_RA:"Right Arm",TRO_ARMOR_LA:"Left Arm",TRO_ARMOR_RLL:"R/L Leg",TRO_ARMOR_RL:"Right Leg",TRO_ARMOR_LL:"Left Leg",TRO_WEAPONS_AND_AMMO:"Weapons<br />and Ammo",TRO_LOCATION:"Location",TRO_CRITICAL:"Critical",BUTTON_LANG_EN:"English",BUTTON_LANG_DE:"German",BUTTON_LANG_BR:"Brazilian"}});
//# sourceMappingURL=sourcemap.map